version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.9
  build:
    commands:
      - echo "Listing files..."
      - ls -R
      - echo "Validating CloudFormation template..."
      - aws cloudformation validate-template --template-body file://template/ImageProccessing.yml
      - echo "Deploying CloudFormation stack..."
      - aws cloudformation deploy \
          --template-file template/ImageProccessing.yml \
          --stack-name image-processing-stack \
          --capabilities CAPABILITY_NAMED_IAM \
          --parameter-overrides BucketName=image-upload-bucket-debitosh
artifacts:
  files:
    - '**/*'
